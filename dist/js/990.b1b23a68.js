"use strict";(self["webpackChunkmall"]=self["webpackChunkmall"]||[]).push([[990],{990:function(a,e,s){s.r(e),s.d(e,{default:function(){return L}});var t=s(3396),l=s(7139);const r=a=>((0,t.dD)("data-v-2cdab05f"),a=a(),(0,t.Cn)(),a),c={class:"wrapper"},o={class:"search"},i=r((()=>(0,t._)("span",{class:"iconfont"},"",-1))),n=["placeholder"],h={key:0,class:"area"},_={class:"area__title"},d={class:"area__list"},u=["onClick"],g={class:"area"},v=r((()=>(0,t._)("h4",{class:"area__title"},"热门搜索",-1))),k={class:"area__list"},y=["onClick"];function p(a,e,s,r,p,f){return(0,t.wg)(),(0,t.iD)("div",c,[(0,t._)("div",o,[i,(0,t._)("input",{class:"search__area",type:"text",onChange:e[0]||(e[0]=(...a)=>r.handleSearchChange&&r.handleSearchChange(...a)),placeholder:r.history[Math.floor(Math.random()*r.history.length)]},null,40,n),(0,t._)("div",{class:"search__cancel",onClick:e[1]||(e[1]=a=>r.cancelandback())},"取消")]),r.history.length?((0,t.wg)(),(0,t.iD)("div",h,[(0,t._)("h4",_,[(0,t.Uk)(" 搜索历史 "),(0,t._)("span",{class:"area__clear",onClick:e[2]||(e[2]=a=>r.clearHistory())},"清除搜索历史")]),(0,t._)("ul",d,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.history,(a=>((0,t.wg)(),(0,t.iD)("li",{class:"area__list__item",key:a,onClick:()=>r.goToSearchList(a)},(0,l.zw)(a),9,u)))),128))])])):(0,t.kq)("",!0),(0,t._)("div",g,[v,(0,t._)("ul",k,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.hotWordList,(a=>((0,t.wg)(),(0,t.iD)("li",{class:"area__list__item",key:a,onClick:()=>r.goToSearchList(a)},(0,l.zw)(a),9,y)))),128))])])])}s(541),s(7658);var f=s(1120),w=s(4870),S=s(2483),C=s(212),m={name:"Search",setup(){(0,S.tv)();const a=(0,w.iH)(JSON.parse(localStorage.history||"[]")),e=e=>{const s=e.target.value;if(!s)return;const t=a.value.find((a=>a===s));t||(a.value.unshift(s),localStorage.history=JSON.stringify(a.value)),f.Z.push(`/searchList?keyword=${s}`)},s=()=>{localStorage.removeItem("history"),a.value=[]},t=(0,w.iH)([]),l=async()=>{const a=await(0,C.U)("/api/shop/search/hot-words");0===a.data.errno&&(t.value=a.data.data)};l();const r=e=>{const s=a.value.find((a=>a===e));s||(a.value.unshift(e),localStorage.history=JSON.stringify(a.value)),f.Z.push(`/searchList?keyword=${e}`)},c=()=>{f.Z.back()};return{handleSearchChange:e,history:a,clearHistory:s,cancelandback:c,hotWordList:t,hotWord:l,goToSearchList:r}}},b=s(89);const D=(0,b.Z)(m,[["render",p],["__scopeId","data-v-2cdab05f"]]);var L=D}}]);
//# sourceMappingURL=990.b1b23a68.js.map