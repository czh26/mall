{"version":3,"file":"js/990.b1b23a68.js","mappings":"0OACOA,MAAM,W,GACJA,MAAM,U,UACTC,EAAAA,EAAAA,GAAsC,QAAhCD,MAAM,YAAW,KAAQ,K,2BAS5BA,MAAM,Q,GACLA,MAAM,e,GAINA,MAAM,c,iBAWPA,MAAM,Q,UACTC,EAAAA,EAAAA,GAAiC,MAA7BD,MAAM,eAAc,QAAI,K,GACxBA,MAAM,c,wDA7BdE,EAAAA,EAAAA,IAwCM,MAxCNC,EAwCM,EAvCJF,EAAAA,EAAAA,GASM,MATNG,EASM,CARJC,GACAJ,EAAAA,EAAAA,GAKE,SAJAD,MAAM,eACNM,KAAK,OACJC,SAAM,oBAAEC,EAAAA,oBAAAA,EAAAA,sBAAAA,IACRC,YAAaD,EAAAA,QAAQE,KAAKC,MAAMD,KAAKE,SAAWJ,EAAAA,QAAQK,U,YAE3DZ,EAAAA,EAAAA,GAA6D,OAAxDD,MAAM,iBAAkBc,QAAK,eAAEN,EAAAA,kBAAiB,QAE/BA,EAAAA,QAAQK,SAAM,WAAtCX,EAAAA,EAAAA,IAeM,MAfNa,EAeM,EAdJd,EAAAA,EAAAA,GAGK,KAHLe,EAGK,UAHmB,WAEtB,OAA+D,QAAzDhB,MAAM,cAAec,QAAK,eAAEN,EAAAA,iBAAgB,aAEpDP,EAAAA,EAAAA,GASK,KATLgB,EASK,gBARHf,EAAAA,EAAAA,IAOKgB,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IALYV,EAAAA,SAARW,K,WAFTjB,EAAAA,EAAAA,IAOK,MANHF,MAAM,mBAELoB,IAAKD,EACLL,QAAK,IAAQN,EAAAA,eAAeW,K,QAE1BA,GAAI,Q,4BAIblB,EAAAA,EAAAA,GAYM,MAZNoB,EAYM,CAXJC,GACArB,EAAAA,EAAAA,GASK,KATLsB,EASK,gBARHrB,EAAAA,EAAAA,IAOKgB,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IALYV,EAAAA,aAARW,K,WAFTjB,EAAAA,EAAAA,IAOK,MANHF,MAAM,mBAELoB,IAAKD,EACLL,QAAK,IAAQN,EAAAA,eAAeW,K,QAE1BA,GAAI,Q,sEAYjB,GACEK,KAAM,SACNC,SACiBC,EAAAA,EAAAA,MAAf,MACMC,GAAUC,EAAAA,EAAAA,IAAIC,KAAKC,MAAMC,aAAaJ,SAAW,OAEjDK,EAAsBC,IAC1B,MAAMC,EAAcD,EAAEE,OAAOC,MAC7B,IAAKF,EAAa,OAClB,MAAMG,EAAWV,EAAQS,MAAME,MAAMnB,GAASA,IAASe,IAClDG,IAEHV,EAAQS,MAAMG,QAAQL,GACtBH,aAAaJ,QAAUE,KAAKW,UAAUb,EAAQS,QAEhDK,EAAAA,EAAAA,KAAa,uBAAsBP,IAAc,EAG7CQ,EAAe,KACnBX,aAAaY,WAAW,WACxBhB,EAAQS,MAAQ,EAAE,EAGdQ,GAAchB,EAAAA,EAAAA,IAAI,IAClBiB,EAAUC,UACd,MAAMC,QAAeC,EAAAA,EAAAA,GAAI,8BACC,IAAtBD,EAAOE,KAAKC,QACdN,EAAYR,MAAQW,EAAOE,KAAKA,KAClC,EAEFJ,IAEA,MAAMM,EAAkBC,IACtB,MAAMf,EAAWV,EAAQS,MAAME,MAAMnB,GAASA,IAASiC,IAClDf,IAEHV,EAAQS,MAAMG,QAAQa,GACtBrB,aAAaJ,QAAUE,KAAKW,UAAUb,EAAQS,QAEhDK,EAAAA,EAAAA,KAAa,uBAAsBW,IAAU,EAGzCC,EAAgB,KACpBZ,EAAAA,EAAAA,MAAa,EAEf,MAAO,CACLT,qBACAL,UACAe,eACAW,gBACAT,cACAC,UACAM,iBAEJ,G,QChGF,MAAMG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://mall/./src/views/search/Search.vue","webpack://mall/./src/views/search/Search.vue?bd63"],"sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"search\">\r\n      <span class=\"iconfont\">&#xe752;</span>\r\n      <input\r\n        class=\"search__area\"\r\n        type=\"text\"\r\n        @change=\"handleSearchChange\"\r\n        :placeholder=\"history[Math.floor(Math.random() * history.length)]\"\r\n      />\r\n      <div class=\"search__cancel\" @click=\"cancelandback()\">取消</div>\r\n    </div>\r\n    <div class=\"area\" v-if=\"history.length\">\r\n      <h4 class=\"area__title\">\r\n        搜索历史\r\n        <span class=\"area__clear\" @click=\"clearHistory()\">清除搜索历史</span>\r\n      </h4>\r\n      <ul class=\"area__list\">\r\n        <li\r\n          class=\"area__list__item\"\r\n          v-for=\"item in history\"\r\n          :key=\"item\"\r\n          @click=\"() => goToSearchList(item)\"\r\n        >\r\n          {{ item }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"area\">\r\n      <h4 class=\"area__title\">热门搜索</h4>\r\n      <ul class=\"area__list\">\r\n        <li\r\n          class=\"area__list__item\"\r\n          v-for=\"item in hotWordList\"\r\n          :key=\"item\"\r\n          @click=\"() => goToSearchList(item)\"\r\n        >\r\n          {{ item }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport router from \"@/router\";\r\nimport { ref } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { get } from \"../../utils/request\";\r\nexport default {\r\n  name: \"Search\",\r\n  setup() {\r\n    const rotuer = useRouter();\r\n    const history = ref(JSON.parse(localStorage.history || \"[]\"));\r\n    //添加历史记录\r\n    const handleSearchChange = (e) => {\r\n      const searchValue = e.target.value;\r\n      if (!searchValue) return;\r\n      const hasValue = history.value.find((item) => item === searchValue);\r\n      if (!hasValue) {\r\n        //没有历史记录就塞进去\r\n        history.value.unshift(searchValue);\r\n        localStorage.history = JSON.stringify(history.value);\r\n      }\r\n      router.push(`/searchList?keyword=${searchValue}`);\r\n    };\r\n    //清除历史记录\r\n    const clearHistory = () => {\r\n      localStorage.removeItem(\"history\");\r\n      history.value = [];\r\n    };\r\n    //热词\r\n    const hotWordList = ref([]);\r\n    const hotWord = async () => {\r\n      const result = await get(\"/api/shop/search/hot-words\");\r\n      if (result.data.errno === 0) {\r\n        hotWordList.value = result.data.data;\r\n      }\r\n    };\r\n    hotWord();\r\n    //点击词语跳转\r\n    const goToSearchList = (keyword) => {\r\n      const hasValue = history.value.find((item) => item === keyword);\r\n      if (!hasValue) {\r\n        //没有历史记录就塞进去\r\n        history.value.unshift(keyword);\r\n        localStorage.history = JSON.stringify(history.value);\r\n      }\r\n      router.push(`/searchList?keyword=${keyword}`);\r\n    };\r\n    //取消返回\r\n    const cancelandback = () => {\r\n      router.back();\r\n    };\r\n    return {\r\n      handleSearchChange,\r\n      history,\r\n      clearHistory,\r\n      cancelandback,\r\n      hotWordList,\r\n      hotWord,\r\n      goToSearchList,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"../../style/viriables.scss\";\r\n.wrapper {\r\n  margin: 0 0.18rem;\r\n  .search {\r\n    display: flex;\r\n    position: relative;\r\n    line-height: 0.32rem;\r\n    margin-top: 0.16rem;\r\n    color: $content-fontColor;\r\n    .iconfont {\r\n      position: absolute;\r\n      left: 0.16rem;\r\n      color: #b7b7b7;\r\n    }\r\n    &__area {\r\n      flex: 1;\r\n      padding: 0 0.12rem 0 0.44rem;\r\n      border-radius: 0.16rem;\r\n      background-color: $input-bgColor;\r\n      border: none;\r\n      outline: none;\r\n      font-size: 0.14rem;\r\n    }\r\n    &__cancel {\r\n      margin-left: 0.12rem;\r\n      font-size: 0.16rem;\r\n    }\r\n  }\r\n  .area {\r\n    margin-top: 0.24rem;\r\n    &__title {\r\n      margin: 0;\r\n      line-height: 0.22rem;\r\n      font-size: 0.16rem;\r\n      font-weight: normal;\r\n      color: $content-fontColor;\r\n    }\r\n    &__clear {\r\n      color: $content-fontColor;\r\n      float: right;\r\n      font-size: 0.14rem;\r\n    }\r\n    &__list {\r\n      margin: 0 0 0 -0.1rem;\r\n      padding: 0;\r\n      list-style-type: none;\r\n      &__item {\r\n        margin-top: 0.12rem;\r\n        margin-left: 0.1rem;\r\n        padding: 0 0.1rem;\r\n        line-height: 0.32rem;\r\n        font-size: 0.14rem;\r\n        background-color: $input-bgColor;\r\n        display: inline-block;\r\n        border-radius: 0.02rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Search.vue?vue&type=template&id=2cdab05f&scoped=true\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=2cdab05f&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\Vue-Progects\\\\mall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2cdab05f\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","type","onChange","$setup","placeholder","Math","floor","random","length","onClick","_hoisted_5","_hoisted_6","_hoisted_7","_Fragment","item","key","_hoisted_9","_hoisted_10","_hoisted_11","name","setup","useRouter","history","ref","JSON","parse","localStorage","handleSearchChange","e","searchValue","target","value","hasValue","find","unshift","stringify","router","clearHistory","removeItem","hotWordList","hotWord","async","result","get","data","errno","goToSearchList","keyword","cancelandback","__exports__","render"],"sourceRoot":""}