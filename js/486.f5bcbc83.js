"use strict";(self["webpackChunkmall"]=self["webpackChunkmall"]||[]).push([[486],{1809:function(a,s,t){t.d(s,{Z:function(){return i},S:function(){return l}});var e=t(3396),n=t(7139);const o={class:"toast"};function r(a,s,t,r,u,l){return(0,e.wg)(),(0,e.iD)("div",o,(0,n.zw)(t.message),1)}var u=t(4870);const l=()=>{const a=(0,u.qj)({toastStatus:!1,showMessage:""}),s=s=>{a.toastStatus=!0,a.showMessage=s,setTimeout((()=>{a.toastStatus=!1,a.showMessage=""}),3e3)};return{toastData:a,showToast:s,useToastEffect:l}};var p={props:["message"]},c=t(89);const d=(0,c.Z)(p,[["render",r],["__scopeId","data-v-13138cbd"]]);var i=d},6486:function(a,s,t){t.r(s),t.d(s,{default:function(){return v}});var e=t(3396),n=t(9242);const o=a=>((0,e.dD)("data-v-4fb5a38e"),a=a(),(0,e.Cn)(),a),r={class:"wrapper"},u=o((()=>(0,e._)("img",{class:"wrapper__img",src:"http://www.dell-lee.com/imgs/vue3/user.png",alt:""},null,-1))),l={class:"wrapper__input"},p={class:"wrapper__input"};function c(a,s,t,o,c,d){const i=(0,e.up)("Toast");return(0,e.wg)(),(0,e.iD)("div",r,[u,(0,e._)("div",l,[(0,e.wy)((0,e._)("input",{class:"wrapper__input__content",placeholder:"请输入用户名","onUpdate:modelValue":s[0]||(s[0]=a=>o.data.username=a)},null,512),[[n.nr,o.data.username]])]),(0,e._)("div",p,[(0,e.wy)((0,e._)("input",{class:"wrapper__input__content",type:"password",placeholder:"请输入密码","onUpdate:modelValue":s[1]||(s[1]=a=>o.data.password=a),autocomplete:"new-password"},null,512),[[n.nr,o.data.password]])]),(0,e._)("div",{class:"wrapper__login-btn",onClick:s[2]||(s[2]=a=>o.handleLogin())},"登陆"),(0,e._)("div",{class:"wrapper__register-btn",onClick:s[3]||(s[3]=a=>o.handleRegisterClick())}," 立即注册 "),o.toastData.toastStatus?((0,e.wg)(),(0,e.j4)(i,{key:0,message:o.toastData.showMessage},null,8,["message"])):(0,e.kq)("",!0)])}t(7658);var d=t(4870),i=t(2483),w=t(212),_=t(1809),g={name:"Login",components:{Toast:_.Z},setup(){const a=(0,i.tv)(),s=(0,d.qj)({username:"",password:""}),{toastData:t,showToast:e}=(0,_.S)(),n=async()=>{try{const t=await(0,w.v)("/api/user/login",{username:s.username,password:s.password});t?.data.username===s.username&&t?.data.password===s.password?(localStorage.isLogin=!0,a.push({name:"Home"})):e("用户名或密码不正确"),console.log(t)}catch(t){alert("请求失败 "+t)}},o=()=>{a.push({name:"Register"})};return{handleLogin:n,handleRegisterClick:o,data:s,useToastEffect:_.S,toastData:t,showToast:e}}},m=t(89);const h=(0,m.Z)(g,[["render",c],["__scopeId","data-v-4fb5a38e"]]);var v=h}}]);
//# sourceMappingURL=486.f5bcbc83.js.map