"use strict";(self["webpackChunkmall"]=self["webpackChunkmall"]||[]).push([[536],{6041:function(t,s,a){a.d(s,{F:function(){return o}});var e=a(65),c=a(3396);const o=t=>{const s=(0,e.oR)(),a=s.state.cartList;let o=0;const r=(t,a,e,c)=>{s.commit("changeItemToCart",{shopId:t,productId:a,productInfo:e,num:c})},_=(t,a,e,c,r)=>{clearTimeout(o),o=0,o=setInterval((()=>{s.commit("changeItemToCart",{shopId:t,productId:a,productInfo:c,num:r}),s.commit("shopNameToCart",{shopId:t,shopName:e})}),300)},n=(t,a,e,c,r)=>{clearTimeout(o),0!=o&&(s.commit("changeItemToCart",{shopId:t,productId:a,productInfo:c,num:r}),s.commit("shopNameToCart",{shopId:t,shopName:e}))},i=(0,c.Fl)((()=>{const s=a[t]?.productList||{},e={};for(let t in s)s[t].count>0&&(e[t]=s[t]);return e})),d=(0,c.Fl)((()=>{const s=a[t]?.productList;let e=0;if(s)for(let t in s){const a=s[t];a.check&&(e+=a.count*a.price)}return e.toFixed(2)})),p=(0,c.Fl)((()=>a[t]?.shopName||""));return{changeItemToCart:r,changeItemToCart_touch:_,changeItemToCart_handle:n,productList:i,price:d,shopName:p}}},3841:function(t,s,a){a.d(s,{Z:function(){return z}});var e=a(3396),c=a(7139);const o=t=>((0,e.dD)("data-v-54af685d"),t=t(),(0,e.Cn)(),t),r={class:"shop"},_=["src"],n={class:"shop__content__title"},i={class:"shop__content__tags"},d={class:"shop__content__tag"},p={class:"shop__content__tag"},l={class:"shop__content__tag"},u={class:"shop__content__hightlight"},m={key:0,class:"shop__products"},v=["src"],h={class:"shop__product__title"},f={class:"shop__product__price"},g=o((()=>(0,e._)("span",{class:"price__yen"},"¥",-1))),k={class:"price__num"},w={class:"oldPrice__yen"};function I(t,s,a,o,I,C){return(0,e.wg)(),(0,e.iD)("div",r,[(0,e._)("img",{class:"shop__img",src:a.item.imgUrl,alt:""},null,8,_),(0,e._)("div",{class:(0,c.C_)({shop__content:!0,"shop__content--bordered":!a.hideborder})},[(0,e._)("div",n,(0,c.zw)(a.item.name),1),(0,e._)("div",i,[(0,e._)("span",d,"月售"+(0,c.zw)(a.item.sales)+"+",1),(0,e._)("span",p,"起送¥"+(0,c.zw)(a.item.expressLimit),1),(0,e._)("span",l,"基础运费¥"+(0,c.zw)(a.item.expressPrice),1)]),(0,e._)("p",u,(0,c.zw)(a.item.slogan),1),a.item.products?((0,e.wg)(),(0,e.iD)("div",m,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(a.item.products,(t=>((0,e.wg)(),(0,e.iD)("div",{class:"shop__product",key:t.name},[(0,e._)("img",{class:"shop__product__img",src:t.imgUrl,alt:""},null,8,v),(0,e._)("p",h,(0,c.zw)(t.name),1),(0,e._)("p",f,[g,(0,e._)("span",k,(0,c.zw)(t.price),1),(0,e._)("span",w,"¥"+(0,c.zw)(t.oldPrice),1)])])))),128))])):(0,e.kq)("",!0)],2)])}var C={name:"shopinfo",props:["item","hideborder"]},L=a(89);const b=(0,L.Z)(C,[["render",I],["__scopeId","data-v-54af685d"]]);var z=b},8536:function(t,s,a){a.r(s),a.d(s,{default:function(){return V}});var e=a(3396);const c={class:"wrapper"};function o(t,s,a,o,r,_){const n=(0,e.up)("TopArea"),i=(0,e.up)("ProductList"),d=(0,e.up)("Order");return(0,e.wg)(),(0,e.iD)("div",c,[(0,e.Wm)(n),(0,e.Wm)(i),(0,e.Wm)(d)])}const r=t=>((0,e.dD)("data-v-fa2c9aa2"),t=t(),(0,e.Cn)(),t),_={class:"top"},n=r((()=>(0,e._)("div",{class:"top__bgcolor"},null,-1))),i={class:"top__header"},d=(0,e.uE)('<div class="top__receiver" data-v-fa2c9aa2><div class="top__receiver__title" data-v-fa2c9aa2>收货地址</div><div class="top__receiver__address" data-v-fa2c9aa2>新疆昌吉市商城路亚馨家园</div><div class="top__receiver__info" data-v-fa2c9aa2><span class="top__receiver__info__name" data-v-fa2c9aa2>陈子涵</span><span class="top__receiver__info__name" data-v-fa2c9aa2>17609941226</span></div><div class="top__receiver__icon iconfont" data-v-fa2c9aa2></div></div>',1);function p(t,s,a,c,o,r){return(0,e.wg)(),(0,e.iD)("div",_,[n,(0,e._)("div",i,[(0,e._)("div",{class:"top__header__back iconfont",onClick:s[0]||(s[0]=t=>c.handleBack())},"  "),(0,e.Uk)(" 确认订单 ")]),d])}var l=a(1120),u={name:"TopArea",setup(){const t=()=>{l.Z.back()};return{handleBack:t}}},m=a(89);const v=(0,m.Z)(u,[["render",p],["__scopeId","data-v-fa2c9aa2"]]);var h=v,f=a(7139);const g={class:"products"},k={class:"products__title"},w={class:"products__wrapper"},I={class:"products__list"},C=["src"],L={class:"products__item__detail"},b={class:"products__item__title"},z={class:"products__item__price"},T={class:"products__item__yen"},D={class:"products__item__total"};function N(t,s,a,c,o,r){return(0,e.wg)(),(0,e.iD)("div",g,[(0,e._)("div",k,(0,f.zw)(c.shopName),1),(0,e._)("div",w,[(0,e._)("div",I,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(c.productList,(t=>((0,e.wg)(),(0,e.iD)("div",{class:"products__item",key:t._id},[(0,e._)("img",{class:"products__item__img",src:t.imgUrl,alt:""},null,8,C),(0,e._)("div",L,[(0,e._)("div",b,(0,f.zw)(t.name),1),(0,e._)("p",z,[(0,e._)("span",T,"¥"+(0,f.zw)(t.price)+" × "+(0,f.zw)(t.count),1),(0,e._)("span",D,"¥"+(0,f.zw)((t.price*t.count).toFixed(2)),1)])])])))),128))])])])}var y=a(2483),O=a(65),F=a(6041),P={name:"ProductList",setup(){const t=(0,y.yj)(),s=(0,O.oR)(),a=t.params.id,e=s.state.cartList,{productList:c,shopName:o}=(0,F.F)(a);return{shopId:a,cartList:e,productList:c,shopName:o}}};const Z=(0,m.Z)(P,[["render",N],["__scopeId","data-v-1f3f0893"]]);var U=Z,x=a(9242);const A=t=>((0,e.dD)("data-v-e6de65fe"),t=t(),(0,e.Cn)(),t),H={class:"order"},S={class:"order__price"},R={class:"order__price__num"},W=A((()=>(0,e._)("h3",{class:"mask__content__title"},"确认要离开收银台?",-1))),j=A((()=>(0,e._)("p",{class:"mask__content__desc"},"请尽快完成支付，否则将被取消",-1))),B={class:"mask__content__btns"};function J(t,s,a,c,o,r){return(0,e.wg)(),(0,e.iD)("div",null,[(0,e._)("div",H,[(0,e._)("div",S,[(0,e.Uk)(" 实付金额 "),(0,e._)("span",R,[(0,e._)("b",null,"¥"+(0,f.zw)(c.price),1)])]),(0,e._)("div",{class:"order__btn",onClick:s[0]||(s[0]=()=>c.submitOrder(!0))},"提交订单")]),(0,e.wy)((0,e._)("div",{class:"mask",onClick:s[4]||(s[4]=()=>c.submitOrder(!1))},[(0,e._)("div",{class:"mask__content",onClick:s[3]||(s[3]=(0,x.iM)((()=>{}),["stop"]))},[W,j,(0,e._)("div",B,[(0,e._)("div",{class:"mask__content__btn",onClick:s[1]||(s[1]=()=>c.handleConfirma(!0))}," 取消订单 "),(0,e._)("div",{class:"mask__content__btn confirmation",onClick:s[2]||(s[2]=()=>c.handleConfirma(!1))}," 确认支付 ")])])],512),[[x.F8,c.mask]])])}a(7658);var K=a(4870),Y=a(212),q=(a(3841),{name:"Order",components:{TopArea:h,ProductList:U},setup(){const t=(0,y.tv)(),s=(0,y.yj)(),a=(0,O.oR)(),e=parseInt(s.params.id),{productList:c,price:o,shopName:r}=(0,F.F)(e),_=(0,K.iH)(!1),n=async s=>{try{const o=[];for(let t in c.value){const s=c.value[t];o.push({id:parseInt(s._id),num:s.count})}const _=await(0,Y.v)("/api/order/",{addressId:"昌吉",shopId:e,shopName:r.value,isCanceled:s,products:o});if(0===_.data.errno){!0===s?t.push({name:"Home"}):t.push({name:"OrderList"}),a.commit("clearCart",e);const c=JSON.parse(localStorage.cartList||"{}");delete c[e],localStorage.cartList=JSON.stringify(c)}}catch(o){console.log("提示下单失败"+o)}},i=t=>{_.value=t};return{price:o,mask:_,handleConfirma:n,submitOrder:i}}});const E=(0,m.Z)(q,[["render",J],["__scopeId","data-v-e6de65fe"]]);var M=E,G={name:"OrderConfirmation",components:{TopArea:h,ProductList:U,Order:M},setup(){return{}}};const Q=(0,m.Z)(G,[["render",o],["__scopeId","data-v-2e8824c6"]]);var V=Q}}]);
//# sourceMappingURL=536.2aa7868e.js.map